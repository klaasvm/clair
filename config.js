// config.js

const config = {
    groep1: {
        apiKey: "WHGHDJVGGPOCYW7I",    // Read key
        channelId: "2688440",          // Channel ID
        fields: {
            1: "CO2",                 
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds", 
            5: "Temperatuur (BME)", 
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5", 
            8: "Particulate Matter 10" 
        }
    },
    groep2: {
        apiKey: "Z37UKTN4HQWYZHM3",    // Read key
        channelId: "2688427",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep3: {
        apiKey: "RBC45OA94F818R7D",    // Read key
        channelId: "2688446",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep4: {
        apiKey: "GK16XTJ4REJFKQQK",   // Read key
        channelId: "2688431",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep5: {
        apiKey: "200PBBPNEK6S4NKX",    // Read key
        channelId: "2688441",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep6: {
        apiKey: "BNIGA9WNSD9J1EAF",    // Read key
        channelId: "2688430",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep7: {
        apiKey: "56SKUVU9D5XVROUW",    // Read key
        channelId: "2688432",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep8: {
        apiKey: "DW97EV1H905BYQZ3",    // Read key
        channelId: "2688437",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep9: {
        apiKey: "KR4R2A4IO1DOFJ1H",    // Read key
        channelId: "2688447",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep10: {
        apiKey: "APAG3K0HE84730RS",    // Read key
        channelId: "2688434",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep11: {
        apiKey: "YZYM1EO2S6S0QN2X",    // Read key
        channelId: "2688433",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    groep12: {
        apiKey: "AETRCPAT0M2PPG77",    // Read key
        channelId: "2688436",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    JosClair1: {
        apiKey: "258JAVG6IPK5U3ZQ",    // Read key
        channelId: "2279508",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    },
    JosClair2: {
        apiKey: "HPEA380O52WNU417",    // Read key
        channelId: "2215330",          // Channel ID
        fields: {
            1: "CO2",
            2: "Temperatuur (SCD)",
            3: "Relatieve vochtigheid (SCD)",
            4: "Volatile Organic Compounds",
            5: "Temperatuur (BME)",
            6: "Relatieve vochtigheid (BME)",
            7: "Particulate Matter 2.5",
            8: "Particulate Matter 10"
        }
    }
};

// Haalt geselecteerde groepen en veld op
function getSelections() {
    const selectedGroups = Array.from(document.querySelectorAll('#groupsSelect option:checked')).map(option => option.value);
    const selectedField = document.querySelector('input[name="part"]:checked')?.value || '1';
    return { groups: selectedGroups, field: selectedField };
}

// Laadt en toont data
function updateVisualizations() {
    const { groups, field } = getSelections();
    const container = document.getElementById('groupsContainer');
    container.innerHTML = ''; // Reset inhoud

    // Controleer of er groepen geselecteerd zijn
    if (groups.length === 0) {
        console.log('Geen groepen geselecteerd, geen grafieken te tonen.');
        return; // Stop de functie als er geen groepen geselecteerd zijn
    }

    // Voeg de grafieken toe
    groups.forEach(group => {
        const groupConfig = config[group];
        if (groupConfig && groupConfig.fields[field]) {
            const groupDiv = document.createElement('div');
            groupDiv.className = 'group-container';

            // Titel toevoegen
            const title = document.createElement('h2');
            title.textContent = `Data van ${group}`;
            groupDiv.appendChild(title);

            // Grafiek iframe toevoegen
            const iframe = document.createElement('iframe');
            iframe.src = `https://thingspeak.com/channels/${groupConfig.channelId}/charts/${field}?api_key=${groupConfig.apiKey}`;
            groupDiv.appendChild(iframe);

            // Voeg de groep toe aan de container
            container.appendChild(groupDiv);
        } else {
            console.error(`Ongeldige groep of veld: ${group}`);
        }
    });
}

// Automatisch data updaten bij veranderingen
document.addEventListener('DOMContentLoaded', () => {
    // Event listener voor groepselectie
    document.getElementById('groupsSelect').addEventListener('change', updateVisualizations);

    // Event listener voor onderdeelselectie
    document.querySelectorAll('input[name="part"]').forEach(input =>
        input.addEventListener('change', updateVisualizations)
    );

    // Laad data direct bij opstarten
    updateVisualizations();
});
